<TargetEndpoint name="nhs-website-content-api-target">
  <PreFlow>
    <Request>
      <Step>
        <Name>VerifyApiKey.FromHeader</Name>
      </Step>
      <Step>
        <Name>FlowCallout.ApplyRateLimiting</Name>
      </Step>
    </Request>
  </PreFlow>
    <HTTPTargetConnection>
      <SSLInfo>
        <Enabled>true</Enabled>
      </SSLInfo>
      <BasePath>/content-api</BasePath>
      <LoadBalancer>
        <Server name= "{{ NHS_CONTENT_API_TARGET_SERVER }}" />
      </LoadBalancer>
    </HTTPTargetConnection>

<!--  <HTTPTargetConnection>-->
<!--    <URL>http://mocktarget.apigee.net</URL>-->
<!--    <Properties>-->
<!--      <Property name="supports.http10">true</Property>-->
<!--      <Property name="request.retain.headers">User-Agent,Referer,Accept-Language</Property>-->
<!--      <Property name="retain.queryparams">apikey</Property>-->
<!--    </Properties>-->
<!--  </HTTPTargetConnection>-->
</TargetEndpoint>
